{"version":3,"file":"odmd-config-networking.js","sourceRoot":"","sources":["odmd-config-networking.ts"],"names":[],"mappings":";;;AAAA,6EAA6F;AAE7F,qEAAqE;AAGrE,MAAa,oBAAqB,SAAQ,uCAAwC;IAgB9E,YAAY,KAAgB;QACxB,KAAK,CAAC,KAAK,EAAE,YAAY,CAAC,CAAC;QAhB/B,mBAAc,GAAG,SAAS,CAAC;QAE3B,0BAA0B;QAE1B,eAAU,GAAG;YACT,KAAK,EAAE,SAAS;YAChB,IAAI,EAAE,YAAY;YAClB,uBAAuB,EAAE,QAAQ;SACpC,CAAA;QAED,eAAU,GAAG,SAAS,CAAA;QAOlB,IAAI,CAAC,gBAAgB,GAAG;YACpB,IAAI,CAAC,aAAa,GAAG,IAAI,aAAa,CAAC,IAAI,EAAE,UAAU,CAAC;SAC3D,CAAA;IACL,CAAC;CACJ;AAtBD,oDAsBC;AAED,MAAsB,OAAQ,SAAQ,2CAAqB;IAavD,YAAY,KAA2B,EAAE,EAAU;QAC/C,KAAK,CAAC,KAAK,EAAE,EAAE,CAAC,CAAC;QAZrB;;;WAGG;QACM,uBAAkB,GAAW,cAAc,CAAC;QAC5C,iBAAY,GAAkC,IAAI,sCAAoB,CAAC,IAAI,EAAE,YAAY,CAAC,CAAA;QAC1F,4BAAuB,GAAkC,IAAI,sCAAoB,CAAC,IAAI,EAAE,WAAW,CAAC,CAAA;IAO7G,CAAC;IAED,mBAAmB,CAAC,MAAc;QAC9B,MAAM,EAAE,GAAG;YACP,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,KAAK,MAAM,EAAE;YAClC,GAAG,IAAI,CAAC,KAAK,CAAC,OAAO,eAAe,MAAM,EAAE;SAC/C,CAAC;QAEF,OAAO,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,2CAAqB,CAAC,mBAAmB,CAAC,CAAC,CAAC,CAAC,CAAA;IACpE,CAAC;CACJ;AAzBD,0BAyBC;AAED,MAAM,aAAc,SAAQ,OAAO;IAAnC;;QACI,oBAAe,GAAW,WAAW,CAAA;QACrC,eAAU,GAAG,eAAe,CAAA;QAC5B,UAAK,GAAG,CAAC,aAAa,EAAE,cAAc,CAAC,CAAA;QACvC,iBAAiB;QACjB,4HAA4H;QAC5H,wEAAwE;QACxE,kEAAkE;QAClE,IAAI;IAER,CAAC;CAAA;AAED,MAAM,eAAgB,SAAQ,OAAO;IAArC;;QACI,oBAAe,GAAW,WAAW,CAAA;QACrC,eAAU,GAAG,iBAAiB,CAAA;QAC9B,UAAK,GAAG,CAAC,cAAc,EAAE,cAAc,CAAC,CAAA;IAC5C,CAAC;CAAA","sourcesContent":["import {OdmdCentralConfig, OdmdEnVerAwsCdkConfig} from \"../odmd-service/odmd-central-config\";\nimport {Construct} from \"constructs\";\nimport {OdmdCrossRefProducer} from \"../odmd-service/odmd-cross-refs\";\n\n\nexport class OdmdConfigNetworking extends OdmdCentralConfig<OdmdEnVerAwsCdkConfig> {\n    codeCommitName = undefined;\n\n    // gitHubRepo =  undefined\n\n    gitHubRepo = {\n        owner: 'gyanglz',\n        repo: 'networking',\n        odmdGhAppInstallationID: 44781963\n    }\n\n    ownerEmail = undefined\n\n    public readonly ipam_west1_le: IPAM_AB;\n    readonly buildEnverConfig: IPAM_AB[]\n\n    constructor(scope: Construct) {\n        super(scope, 'networking');\n        this.buildEnverConfig = [\n            this.ipam_west1_le = new IPAM_WEST1_LE(this, 'west1-le'),\n        ]\n    }\n}\n\nexport abstract class IPAM_AB extends OdmdEnVerAwsCdkConfig {\n\n    /**\n     * AWS01-networking-le\n     * #701066453035 | aws01-networking-le@legalzoom.com\n     */\n    readonly targetAWSAccountID: string = '701066453035';\n    readonly ipamPoolName: OdmdCrossRefProducer<IPAM_AB> = new OdmdCrossRefProducer(this, 'share-pool')\n    readonly transitGatewayShareName: OdmdCrossRefProducer<IPAM_AB> = new OdmdCrossRefProducer(this, 'share-tgw')\n\n\n    abstract readonly cidrs: string[];\n\n    constructor(owner: OdmdConfigNetworking, id: string) {\n        super(owner, id);\n    }\n\n    getBranchStackNames(branch: string) {\n        const rt = [\n            `${this.owner.buildId}--${branch}`,\n            `${this.owner.buildId}-share-nat--${branch}`\n        ];\n\n        return rt.map(n => OdmdEnVerAwsCdkConfig.SANITIZE_STACK_NAME(n))\n    }\n}\n\nclass IPAM_WEST1_LE extends IPAM_AB {\n    targetAWSRegion: string = 'us-west-1'\n    baseBranch = 'ipam_west1_le'\n    cidrs = ['10.0.0.0/12', '10.16.0.0/12']\n    // preCdkCmds = [\n    //     `TOKEN=$(aws secretsmanager get-secret-value --secret-id networking-bk-gh-pat --query 'SecretString' --output text)`,\n    //     `echo \"@gyanglz:registry=https://npm.pkg.github.com/\" >> .npmrc`,\n    //     `echo \"//npm.pkg.github.com/:_authToken=$TOKEN\" >> .npmrc`,\n    // ]\n\n}\n\nclass IPAM_WEST1_PROD extends IPAM_AB {\n    targetAWSRegion: string = 'us-west-1'\n    baseBranch = 'ipam-west1-prod'\n    cidrs = ['10.32.0.0/12', '10.48.0.0/12']\n}\n"]}